<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <div w3-include-html="h1.html"></div>
        <div id="topbar">
            <div id="title">
                Jordan IMBERT<br>
                <span class="main-subtitle">Blog personnel</span>
        </div>
            <div id="menu">
                <a href="/">Blog</a>
                <a href="/cv">CV</a>
                <a href="/portfolio">Portfolio</a>
            </div>
        </div>

        <div class="wrap" style="clear: both;"></div>
        <hr>

        <div id="main-container">
            <div id="sidebar">
                <img="#"/>
                <h2>Jordan IMBERT</h2>
                <span id="job-description">Ingénieur en logiciel embarqué basé à Grenoble</span>
                <ul id="picto">
                        <li>Google map</li>
                        <li>Github</li>
                        <li>Gitlab</li>
                        <li>Linkedin</li>
                </ul>
            </div>
            <div id="sub-container">
            </div>
        </div>
        <div id="footer"></div>
    
    <style>
        body{
            font-size: 13pt;
            margin: 0;
            padding: 0;
            background-color:#E8DEDE1C;
            color:#2b2d30;
        }

        h1,h2,h3{
            color:#5b6066; 
        }

        hr{
            margin: 0;
            padding: 0;
        }

        #topbar {
            height:80px;
            padding: 0;
            margin: 0;
        }

        #title{
            float: left;
            margin-top: 10px;
            margin-left: 15%;
            font-size: 22px;
            color: #222831;
            font-weight: bolder;
        }

        .main-subtitle{
            font-size: 0.75em;
            font-weight: bold;
            color: #535353;
        }

        #menu{
            float: right;
            margin-right: 15%;
        }

        #menu a{
            text-decoration: none;
            margin-left: 20pt;
            font-size: 40px;
            color:#222831;
        }

        #main-container{
            margin-left: 15%;
            margin-right: 15%;
        }

        #sidebar{
            float: left;
            width: 20%;
        }

        #sub-container{
            float: right;width: 78%;margin-left: 2%;
        }
        
        .topbar{
            float:left;
        }

        .post {
            text-decoration: none;
            color:inherit;
        }
        
        .post:hover h2, .post:hover{
            color:#000000;
        }

        .post-title{
            text-decoration: underline;
            margin-bottom:5px;
            font-size:30px;
        }

        .post-date {
            font-size:15px;
            margin-bottom: 15px;
            background-image:url("images/picto-calendar.jpg");
            background-repeat: no-repeat;
            background-position-x:72px;
            padding-top:3px;
        }

    </style>
    <script>
        var posts = [
            {
                "title" : "2023.04.03-premier-post.html",
                "content" : ""
            },
            {
                "title" : "2023.04.04-deuxième-article.html",
                "content" : ""
            }
        ];

        
        function getPost(title){
            return new Promise(function (resolve, reject) {
                const url2 = 'https://raw.githubusercontent.com/ecrin4102/ecrin4102.github.io/main/blog/' + title;
                const Http = new XMLHttpRequest();
                Http.open("GET", url2);
            
                Http.onloadend = (e2) => {
                    resolve(Http.responseText);
                }

                Http.send();
            });
        }

        function displayPost(title){
            var posts = document.querySelectorAll('.post')
            
            posts.forEach(p => {
                p.hidden = !p.outerHTML.includes(title);
            });

            getPost(title).then((result) =>{
                document.getElementById(title).innerHTML = result;
            });
        };

        var promises = [];
        posts.forEach(element => {
                promises.push(getPost(element["title"]).then(result => {
                   const p = self.posts.find(x => x["title"] == element["title"] )
                   p["content"] = result
                }))
            }
        );
        
        Promise.all(promises).then(() =>{
            for(var i = 0 ; i < posts.length; i++){
                document.getElementById("sub-container").insertAdjacentHTML("afterbegin", 
                    "<a class=\"post\" id=\""+ posts[i]["title"] +"\"  href=\"./blog/"+posts[i]["title"]+"\">" 
                        + 
                        posts[i]["content"].slice(0, 1024)
                        +
                    "</a>"); 
            }
          
        });

    </script>
</body>
</html>